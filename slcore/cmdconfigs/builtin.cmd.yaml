diagnose:
    help: "Run - Online assembling for the image produced by compiling
        the OS source. Debug interface will be exposed if the validation fails."
    optional: &optional
        firmware: &firmware
            short: f
            required: False
            metavar: "IMAGE"
            help: "Use the IMAGE to diagnose your models. If not set,
                use the last valid image, otherwise, use the first image
                in your current project(./samander batch -s). If there is
                no valid image and there is no image in your project,
                you must provide a image."
        dtb: &dtb
            short: dtb
            required: False
            help: "Path to a device tree blob."
        trace: &trace
            short: t
            help: "Path to the trace of format uuid-arch-endian.trace"
        timeout: &timeout
            short: to
            type: int
            default: 60
            help: "Trace timeout."
        source: &source
            short: s
            required: False
            help: "Path to the OS source."
        nocompilation: &nocompilation
            short: nc
            action: "store_true"
            default: False
            help: "No compilation for concurrent tasks."
        nocallstack: &nocallstack
            short: ncs
            action: "store_true"
            default: False
            help: "Skip callstack for sake of time."
        autoboard: &autoboard
            short: ab
            action: "store_true"
            default: False
            help: "Use autoboard except QEMU builtin peripherals."
        autoboard_all: &autoboard_all
            short: aa
            action: "store_true"
            default: False
            help: "Use autoboard replacing QEMU builtin peripherals."
    callback: diagnosis
upload:
    help: "Run - Online kernel booting. No debug interfaces."
    optional:
        firmware:
            << : *firmware
            required: True
        dtb: *dtb
        timeout: *timeout
        nocompilation: *nocompilation
        board: {short: b, required: False, help: "set board manually to replace --url"}
        url: {short: l, required: False, help: "will be removed in the future"}
        delete: {short: del, required: False, action: "store_true", default=False,
            help: "Delete trace to save space."}
        autoboard: *autoboard
        autoboard_all: *autoboard_all
    callback: uploading
synthesize:
    help: "Run - Convert device tree to QEMU virtual machine."
    optional:
        dtb:
          << : *dtb
          required: True
        nocompilation: *nocompilation
        autoboard: *autoboard
        autoboard_all: *autoboard_all
    callback: synthesis
coverup:
    help: "Standalone - QEMU trace analysis."
    optional:
        trace: *trace
        source: *source
        nocallstack: *nocallstack
    callback: tracecoverup
trace:
    help: "Standalone - Trace."
    optional:
        trace: *trace
        timeout: *timeout
    callback: trace
archive:
    help: "Standalone - QEMU machine archiving."
    optional:
        dtb: *dtb
    callback: archive
